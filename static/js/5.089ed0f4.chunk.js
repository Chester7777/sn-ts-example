(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[5],{387:function(e,t,c){"use strict";c.r(t),c.d(t,"Chat",(function(){return a})),c.d(t,"Messages",(function(){return o})),c.d(t,"Message",(function(){return b})),c.d(t,"AddMessagesForm",(function(){return d}));var r=c(149),n=c(0),s=c.n(n),u=c(14),j=c(189),i=c(1),a=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.chat.status}));return Object(n.useEffect)((function(){return e(Object(j.c)()),function(){e(Object(j.d)())}}),[]),Object(i.jsxs)("div",{children:["error"===t&&Object(i.jsx)("div",{children:"Some error occurred. Please refresh the page"}),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o,{}),Object(i.jsx)(d,{})]})]})},o=function(){var e=Object(n.useRef)(null),t=Object(u.d)((function(e){return e.chat.messages})),c=Object(n.useState)(!1),s=Object(r.a)(c,2),j=s[0],a=s[1];return Object(n.useEffect)((function(){var t;j&&(null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}))}),[t]),Object(i.jsxs)("div",{style:{height:"400px",overflowY:"auto"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!j&&a(!0):j&&a(!1)},children:[t.map((function(e,t){return Object(i.jsx)(b,{message:e},e.userId)})),Object(i.jsx)("div",{ref:e})]})},b=s.a.memo((function(e){var t=e.message;return Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{style:{width:"30px"},src:t.photo})," ",Object(i.jsx)("b",{children:t.userName}),Object(i.jsx)("br",{}),t.message,Object(i.jsx)("hr",{})]})})),d=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],s=t[1],a=Object(u.d)((function(e){return e.chat.status})),o=Object(u.c)();return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:Object(i.jsx)("textarea",{onChange:function(e){return s(e.currentTarget.value)},value:c})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{disabled:"ready"!==a,onClick:function(){c&&(o(Object(j.b)(c)),s(""))},children:"send"})})]})};t.default=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(a,{})})}}}]);
//# sourceMappingURL=5.089ed0f4.chunk.js.map