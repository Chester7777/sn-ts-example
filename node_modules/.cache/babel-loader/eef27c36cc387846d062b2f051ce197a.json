{"ast":null,"code":"import _toConsumableArray from\"C:/React/reactProject/sn-ts-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/React/reactProject/sn-ts-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{profileAPI}from\"../API/API\";var ADD_POST=\"ADD-POST\";var SET_USER_PROFILE=\"SET_USER_PROFILE\";var SET_STATUS=\"SET_STATUS\";// обьект initialState задает начальное значение state, если он не придет сразу\nvar initialState={posts:[{id:1,message:\"Hey, why nobody love me\",likes:\"15\"},{id:2,message:\"It`s our new program! Hey\",likes:\"20\"}],profile:{},status:\"\"};// обьект initialState задает начальное значение state, если он не придет сразу\nvar profilePageReducer=function profilePageReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var newPost={id:3,message:action.newPostText,likes:\"0\"};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost])});case SET_USER_PROFILE:return _objectSpread(_objectSpread({},state),{},{profile:action.profile});case SET_STATUS:return _objectSpread(_objectSpread({},state),{},{status:action.status});default:return state;}};export var addPostsActionCreator=function addPostsActionCreator(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var getUserProfile=function getUserProfile(userId){return function(dispatch){profileAPI.getProfile(userId).then(function(response){dispatch(setUserProfile(response.data));});};};export var getStatus=function getStatus(userId){return function(dispatch){profileAPI.getStatus(userId).then(function(response){dispatch(setStatus(response.data));});};};export var updateStatus=function updateStatus(status){return function(dispatch){profileAPI.updateStatus(status).then(function(response){if(response.data.resultCode===0){dispatch(setStatus(status));}});};};export default profilePageReducer;","map":{"version":3,"sources":["C:/React/reactProject/sn-ts-example/src/redux/profilePage-reducer.ts"],"names":["profileAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","initialState","posts","id","message","likes","profile","status","profilePageReducer","state","action","type","newPost","newPostText","addPostsActionCreator","setUserProfile","setStatus","getUserProfile","userId","dispatch","getProfile","then","response","data","getStatus","updateStatus","resultCode"],"mappings":"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","sourcesContent":["import {profileAPI} from \"../API/API\";\r\nimport {Dispatch} from \"redux\";\r\n\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nconst SET_STATUS = \"SET_STATUS\";\r\n\r\nexport type PostsType = {\r\n    id: number\r\n    message: string\r\n    likes: string\r\n}\r\ntype ContactsType = {\r\n    facebook: string,\r\n    website: null,\r\n    vk: string,\r\n    twitter: string,\r\n    instagram: string,\r\n    youtube: null,\r\n    github: string,\r\n    mainLink: null\r\n}\r\ntype PhotosType = {\r\n    small: string,\r\n    large: string\r\n}\r\nexport type ProfilePropsType = {\r\n    aboutMe: string,\r\n    contacts: ContactsType,\r\n    lookingForAJob: boolean,\r\n    lookingForAJobDescription: string,\r\n    fullName: string,\r\n    userId: number,\r\n    photos: PhotosType\r\n}\r\nexport type StatusProfileType = {\r\n    resultCode: number,\r\n    message: string,\r\n    data: {\r\n    resultCode: number\r\n    messages: string[],\r\n    data: {}\r\n}\r\n}\r\n\r\n\r\nexport type InitialStateType = typeof initialState\r\n// обьект initialState задает начальное значение state, если он не придет сразу\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, message: \"Hey, why nobody love me\", likes: \"15\"},\r\n        {id: 2, message: \"It`s our new program! Hey\", likes: \"20\"},\r\n    ] as Array<PostsType>,\r\n    profile: {} as ProfilePropsType,\r\n    status: \"\"\r\n}\r\n\r\n// обьект initialState задает начальное значение state, если он не придет сразу\r\nconst profilePageReducer = (state: InitialStateType = initialState, action: ProfileActionType): InitialStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            const newPost = {\r\n                id: 3,\r\n                message: action.newPostText,\r\n                likes: \"0\"\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost]\r\n            }\r\n            case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n\r\n\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}\r\nexport const addPostsActionCreator = (newPostText: string) => ({type: ADD_POST, newPostText} as const)\r\nexport const setUserProfile = (profile: ProfilePropsType) => ({type: SET_USER_PROFILE, profile} as const)\r\nexport const setStatus = (status: string) => ({type: SET_STATUS, status} as const)\r\n\r\nexport const getUserProfile = (userId: string) => (dispatch: Dispatch<ProfileActionType>) => {\r\n    profileAPI.getProfile(userId).then(response => {\r\n        dispatch(setUserProfile(response.data));\r\n    })\r\n}\r\nexport const getStatus = (userId: string) => (dispatch: Dispatch) => {\r\n    profileAPI.getStatus(userId).then(response => {\r\n        dispatch(setStatus(response.data))\r\n    })\r\n}\r\nexport const updateStatus = (status: string) => (dispatch: Dispatch) => {\r\n    profileAPI.updateStatus(status).then(response => {\r\n      if(response.data.resultCode === 0) {\r\n          dispatch(setStatus(status))\r\n      }\r\n    })\r\n}\r\n\r\n\r\n\r\ntype ProfileActionType =\r\n    ReturnType<typeof addPostsActionCreator> |\r\n    ReturnType<typeof setUserProfile> |\r\n    ReturnType<typeof setStatus>\r\n\r\nexport default profilePageReducer;"]},"metadata":{},"sourceType":"module"}